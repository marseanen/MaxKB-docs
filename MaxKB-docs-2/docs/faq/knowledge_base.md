# База знаний (FAQ)

## 1 «Умная» сегментация даёт неудовлетворительный результат

Стандартная логика сегментации не всегда подходит к структуре конкретного документа. После импорта попробуйте «Расширенную сегментацию» и укажите собственное регулярное выражение маркера для точной сегментации.

![doc](../img/FAQ/使用高级分段.png){width="900px"}

**Примеры сценариев:**

- **Многоуровневая цифровая нумерация**  
    Регулярное выражение: \d+\.\d*\.\d*\.[a-zA-Z\s]*[\u4e00-\u9fa5，]+  
    Пример: 1. Заголовок 1.1 Подзаголовок

- **Китайская нумерация**:  
    Регулярное выражение: [一二三四五六七八九十]*、[\u4e00-\u9fa5a-zA-Z]+  
    Пример: 一、Заголовок

- **Оглавление романа**:  
    Регулярное выражение: [第][一二三四五六七八九十]+[章][\u4e00-\u4e00a-zA-Z]+  
    Пример: 第一章 Заголовок

- **Смешанная китайская и числовая многоуровневая нумерация**:  
    Регулярное выражение: [一二三四五六七八九十|1-9]+[、|.]1-9*.[1-9]*[\u4e00-\u9fa5a-zA-Z]+  
    Пример: 一、Заголовок 1.1 Подзаголовок

Подробные действия и предпросмотр см.: [**Сегментация по регулярным выражениям в MaxKB**](https://kb.fit2cloud.com/?p=bfe242a4-9a77-459c-ac75-4ef078e170c9).

## 2 После векторизации загруженного документа число символов равно 0

Файл на самом деле в формате `.doc`, который не поддерживается — поэтому после векторизации символов 0.
Требования к загружаемым документам:

- Текстовые файлы: Markdown, TXT, PDF, DOCX, HTML, XLS, XLSX, CSV, ZIP;
- Таблицы: XLS, XLSX, CSV, ZIP;
- QA‑пары: XLS, XLSX, CSV, ZIP;

## 3 Документ загружен успешно, но не отображается в списке

Откройте консоль браузера (F12). Если ошибка — “413 Request Entity Too Large”, увеличьте лимит размера запроса у обратного прокси (для nginx — параметр client_max_body_size) и перезагрузите конфигурацию.

## 4 После экспорта/импорта БЗ в ZIP количество сегментов не совпадает

После экспорта БЗ при повторной загрузке ZIP выберите тип импорта **«QA‑пары»**.

## 5 После загрузки документа в БЗ некорректное отображение заголовков

Проблема из‑за ПО архивации. Известно о несовместимостях WinRAR и «52 压缩». Рекомендуется использовать другое ПО для сжатия/распаковки.

## 6 Векторизация успешна, но генерация вопросов не работает

Возможна проблема с текущей LLM для генерации вопросов. Попробуйте другую модель. Также проверьте логи в `/opt/maxkb/logs` для уточнения причины.