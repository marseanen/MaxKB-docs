Корректная сегментация содержания в зависимости от структуры документа важна для последующего поиска и сопоставления в базе знаний. Наиболее распространённый способ — делить по заголовкам.
По умолчанию MaxKB делит загружаемые документы по двум правилам: «умная сегментация» и «расширенная сегментация». По сути, обе опираются на маркеры сегментации и длину текста. Для документов с корректной разметкой (многоуровневые заголовки) результат соответствует ожиданиям. 
    
Как быть с документами, которые выглядят структурированными, но не используют стандартизированные заголовки? Пример на рисунке ниже.

![doc](../img/FAQ/doc_split.png){width="500px"}

Базовое правило в MaxKB — сегментация по регулярным выражениям. В «расширенной сегментации» также можно ввести собственное регулярное выражение — так сегментация будет соответствовать закономерностям конкретного документа.

## 1 Частые маркеры сегмента и их регулярные выражения

|    Сценарий   | Пример     |  Выражение  | 
     |----------|:--------|:---------|
     |Заголовок главы |   `第一章 RAG与大模型应用`  | `[第][一二三四五六七八九十]+[章]` |
     |Заголовок раздела |   `第一节 大模型应用的方向：RAG` | `[第][一二三四五六七八九十]+[节]` |
     |Нумерованный заголовок|`一、 RAG与大模型应用` </br> `1.1 大模型应用的方向：RAG`| `[一二三四五六七八九十|1-9]+[、|.][1-9]*[.]*[1-9]*` |
     |Пункт  |  `第一条：本公司员工均应遵守以下规定。` |`[第][一二三四五六七八九十]+[条]`|

## 2 Действия и результат
    
Если при использовании стандартного правила предпросмотр сегментации неудовлетворителен, используйте «расширенную сегментацию».
![doc](../img/FAQ/doc_default_split.png)
![doc](../img/FAQ/doc_advance_split.png)


Для эффективной сегментации введите вручную регулярное выражение маркера, например `[第][一二三四五六七八九十]+[条]` (после ввода нажмите Enter), задайте максимальную длину сегмента и сгенерируйте предпросмотр.
Из предпросмотра видно, что каждый пункт корректно выделен отдельным сегментом, сохраняя целостность смысла.

![doc](../img/FAQ/doc_re_split.png)
    
    
    
    


