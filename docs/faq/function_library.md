# Библиотека функций

## 1 После запуска библиотеки функций появляется сообщение о недостающих зависимостях

![doc](../img/FAQ/函数库缺少依赖.png){width="900px"}

Сообщение о недостающих зависимостях означает, что некоторым функциям требуются сторонние библиотеки. Если они не установлены, библиотека функций не сможет работать.
Войдите в контейнер MaxKB:
```
docker exec -it maxkb bash 
```
Установите зависимость через pip, например pymysql: 
```    
pip install pymysql
```

## 2 Ошибка подключения библиотеки функций к базе SQL Server

![doc](../img/FAQ/函数库连接数据库失败.png)

При подключении к SQL Server возникает ошибка: pymssql connect failed 20002, b'DB-Lib error message 20002, severity 9: Adaptive Server connection failed'.  
Возможные причины:

    - Сеть: контейнер не может обратиться к IP целевого сервера (например, 192.168.0.23).
    - Зависимости: несовместимая версия pymssql или ошибка установки.
    - Конфигурация подключения: не указан корректный TDS‑версия.
    
Решения:

    - Проверьте сетевую доступность: связь между контейнером и сервером, настройки SQL Server (разрешить удалённые подключения) и правила файрвола для нужного порта.
    - Переустановите совместимую версию pymssql. После установки в контейнере используйте её в библиотеке функций.
    - Укажите версию TDS (например, 7.0) в строке подключения.

## 3 Сообщение при выполнении: "Exception: keyword 'eval(' is banned in the tool."

В целях безопасности (защита от вредоносного кода) в MaxKB V2 запрещены конструкции subprocess, system, eval и т.п. в сценариях инструментов.
    